<!-- Topbar Start -->

<div id="notification-container"></div>

<div id="message-main-container"></div>

<div class="container-fluid">
  <div class="row bg-secondary py-1 px-xl-5">
    <div class="col-lg-6 d-none d-lg-block">
      <div class="d-inline-flex align-items-center h-100">
        <a class="text-body mr-3" href="">Sobre nosotros</a>
        <a class="text-body mr-3" href="/contacto">Contacto</a>
      </div>
    </div>
    <div class="col-lg-6 text-center text-lg-right">
      <div class="d-inline-flex align-items-center">
        <div class="btn-group">
          <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-toggle="dropdown">Mi
            cuenta</button>
          <div class="dropdown-menu dropdown-menu-right">
            <% if (user) { %>
            <button class="dropdown-item" type="button" onclick="location.href=''">
              <%= user.nombre %>
            </button>
            <button class="dropdown-item" type="button" onclick="location.href='/Cambiar-contraseña.html'">
              Cambiar contraseña
            </button>
            <% if (user.credenciales && user.credenciales == 'A') { %>
            <button class="dropdown-item" type="button" onclick="location.href='/lisboa/administracion'">
              Administracion
            </button>
            <% } %>
            <button class="dropdown-item" type="button" id="logout-button">Cerrar sesión</button>
            <script>
              document.addEventListener('DOMContentLoaded', () => {
                const logoutButton = document.getElementById('logout-button');
                logoutButton.addEventListener('click', async () => {
                  try {
                    const response = await fetch('/api/products/logout', {
                      method: 'POST',
                    });
                    if (response.ok) {
                      console.log('Sesión cerrada correctamente. El servidor redirigirá.');
                      window.location.href = '/';
                    } else {
                      console.error('Error al cerrar la sesión.');
                    }
                  } catch (error) {
                    console.error('Error de red:', error);
                  }
                });
              });
            </script>
            <% } else { %>
            <button class="dropdown-item" type="button" onclick="location.href='/login'">Iniciar
              seción</button>
            <button class="dropdown-item" type="button" onclick="location.href='/registrarse'">Registrar
              cuenta </button>
            <% } %>
          </div>
        </div>
        <div class="btn-group mx-2">
          <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-toggle="dropdown">USD</button>
          <div class="dropdown-menu dropdown-menu-right">
            <button class="dropdown-item" type="button">USD</button>
          </div>
        </div>
        <div class="btn-group">
          <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-toggle="dropdown">ES</button>
          <div class="dropdown-menu dropdown-menu-right">
            <button class="dropdown-item" type="button">ES</button>
          </div>
        </div>
      </div>
      <div class="d-inline-flex align-items-center d-block d-lg-none">
        <a href="" class="btn px-0 ml-2">
          <i class="fas fa-heart text-dark"></i>
          <span class="badge text-dark border border-dark rounded-circle" style="padding-bottom: 2px;">0</span>
        </a>
        <a href="" class="btn px-0 ml-2">
          <i class="fas fa-shopping-cart text-dark"></i>
          <span class="badge text-dark border border-dark rounded-circle" style="padding-bottom: 2px;">0</span>
        </a>
      </div>
    </div>
  </div>
  <div class="row align-items-center bg-light py-3 px-xl-5 d-none d-lg-flex">
    <div class="col-lg-4">
      <a href="" class="text-decoration-none">
        <span class="h1 text-uppercase  text-primary-header bg-dark2 px-2 h-box-1">La casa de la</span>
        <span class="h1 text-uppercase text-dark bg-primary2 px-2 ml-n1 h-box-2">Sabiduria</span>
      </a>
    </div>
    <div class="col-lg-4 col-6 text-left">
      <form action="javascript:void(0);"></form>
      <div class="input-group">
        <input type="text" class="form-control" placeholder="¿Que estás buscando?" id="searchInput">
        <div class="input-group-append">
          <span class="input-group-text bg-transparent text-primary">
            <i class="fa fa-search"></i>
          </span>
        </div>
      </div>
      </form>

    </div>
    <div class="col-lg-4 col-6 text-right">
      <p class="m-0">Contáctanos</p>
      <h5 class="m-0">04120000000</h5>
    </div>
  </div>
</div>
<!-- Topbar End -->


<!-- Navbar Start -->
<div class="container-fluid mb-30">
  <div class="row px-xl-5">
    <div class="col-lg-3 d-none d-lg-block bg-primary" onclick="toggleNavbar()">
      <a class="btn d-flex align-items-center justify-content-between bg-primary w-100" data-toggle="collapse" href="#navbar-vertical" style="height: 65px; padding: 0 30px;">
        <h6 class="text-dark m-0"><i class="fa fa-bars mr-2"></i>Categorias</h6>
        <i class="fa fa-angle-down text-dark"></i>
      </a>
      <nav class="collapse position-absolute navbar navbar-vertical navbar-light align-items-start p-0 bg-light" id="navbar-vertical" style="width: calc(100% - 30px); z-index: 999;">
        <div class="navbar-nav w-100">
          <!--
                        <a href="" class="nav-item nav-link">item</a>
                        -->
        </div>
      </nav>
    </div>
    <div class="col-lg-9 bg-dark">
      <nav class="navbar navbar-expand-lg bg-dark navbar-dark py-3 py-lg-0 px-0">
        <a href="" class="text-decoration-none d-block d-lg-none">
          <span class="h1 text-uppercase text-dark bg-light px-2-header">lisboa</span>
          <span class="h1 text-uppercase text-light bg-primary px-2-header ml-n1">multiservicios</span>
        </a>
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
          <div class="navbar-nav mr-auto py-0">
            <a href="index.html" class="nav-item nav-link active">inicio</a>
            <a href="shop.html" class="nav-item nav-link">Tienda</a>
            <!--<a href="detail.html" class="nav-item nav-link">Temporal</a>-->
            <!--<div class="nav-item dropdown">
              <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Más<i class="fa fa-angle-down mt-1"></i></a>
              <div class="dropdown-menu bg-dark rounded-0 border-0 m-0">
                <a href="cart.html" class="dropdown-item">Carrito</a>
                <a href="checkout.html" class="dropdown-item">Pagar</a>
              </div>
            
            </div>-->
            <a href="cart.html" class="nav-item nav-link">Carrito</a>
            <a href="historial.html" class="nav-item nav-link">Historial</a>
            <a href="contact.html" class="nav-item nav-link">Contacto</a>
          </div>
          <div class="navbar-nav ml-auto py-0 d-none d-lg-block">
            <a href="/tienda/productos/favoritos" class="btn px-0">
              <i class="fas fa-heart text-primary"></i>
              <span class="badge text-secondary border border-secondary rounded-circle" style="padding-bottom: 2px;">0</span>
            </a>
            <a href="/carrito" class="btn px-0 ml-3">
              <i class="fas fa-shopping-cart text-primary"></i>
              <span class="badge text-secondary border border-secondary rounded-circle" style="padding-bottom: 2px;">0</span>
            </a>
          </div>
        </div>
      </nav>
    </div>
  </div>
</div>

<!-- Navbar End -->